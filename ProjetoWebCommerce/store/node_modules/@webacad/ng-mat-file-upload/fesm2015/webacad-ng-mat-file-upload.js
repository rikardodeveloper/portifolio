import { readFileAsDataURL } from '@webacad/observable-file-reader';
import { Component, Input, Optional, Self, ViewChild, NgModule } from '@angular/core';
import { NgForm, FormGroupDirective, NgControl } from '@angular/forms';
import { ErrorStateMatcher, mixinErrorState } from '@angular/material/core';
import { MatFormFieldControl } from '@angular/material/form-field';
import { CommonModule } from '@angular/common';
import { MatButtonModule } from '@angular/material/button';
import { MatDividerModule } from '@angular/material/divider';
import { MatListModule } from '@angular/material/list';
import { MatProgressBarModule } from '@angular/material/progress-bar';
import { MatIconModule } from '@angular/material/icon';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const imageMimeTypes = [
    'image/gif', 'image/png', 'image/jpeg',
];
class UploadFile {
    /**
     * @param {?} file
     * @param {?=} _progress
     */
    constructor(file, _progress = 0) {
        this.file = file;
        this._progress = _progress;
        this.icon = 'cloud_upload';
    }
    /**
     * @return {?}
     */
    get progress() {
        return this._progress;
    }
    /**
     * @param {?} progress
     * @return {?}
     */
    set progress(progress) {
        this._progress = progress;
    }
    /**
     * @return {?}
     */
    supportsImagePreview() {
        return imageMimeTypes.indexOf(this.file.type) >= 0;
    }
    /**
     * @return {?}
     */
    getImageSource() {
        if (typeof this.imageSource !== 'undefined') {
            return this.imageSource;
        }
        return this.imageSource = readFileAsDataURL(this.file);
    }
    /**
     * @param {?} add
     * @return {?}
     */
    increaseProgress(add) {
        this.progress += add;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
let nextUniqueId = 0;
class BaseMatFileUploadComponent {
    /**
     * @param {?} _defaultErrorStateMatcher
     * @param {?} _parentForm
     * @param {?} _parentFormGroup
     * @param {?} ngControl
     */
    constructor(_defaultErrorStateMatcher, _parentForm, _parentFormGroup, ngControl) {
        this._defaultErrorStateMatcher = _defaultErrorStateMatcher;
        this._parentForm = _parentForm;
        this._parentFormGroup = _parentFormGroup;
        this.ngControl = ngControl;
    }
}
/** @type {?} */
const _BaseMatFileUploadComponentMixin = mixinErrorState(BaseMatFileUploadComponent);
class MatFileUploadComponent extends _BaseMatFileUploadComponentMixin {
    /**
     * @param {?} defaultErrorStateMatcher
     * @param {?} parentForm
     * @param {?} parentFormGroup
     * @param {?} ngControl
     */
    constructor(defaultErrorStateMatcher, parentForm, parentFormGroup, ngControl) {
        super(defaultErrorStateMatcher, parentForm, parentFormGroup, ngControl);
        this.ngControl = ngControl;
        this.required = false;
        this.multiple = false;
        this.preview = false;
        this.previewPosition = 'bottom';
        this.dense = false;
        this.selectedText = defaultSelectedText;
        this.visibleValue = '';
        this.shouldLabelFloat = true;
        this._files = [];
        this._uid = `wa-mat-file-upload-${nextUniqueId++}`;
        this.onTouched = () => { };
        this._onChange = (_) => { };
        if (this.ngControl !== null) {
            this.ngControl.valueAccessor = this;
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set value(value) { }
    /**
     * @return {?}
     */
    get disabled() {
        if (typeof this._disabled !== 'undefined') {
            return this._disabled;
        }
        if (this.ngControl && this.ngControl.disabled !== null) {
            return this.ngControl.disabled;
        }
        return false;
    }
    /**
     * @param {?} disabled
     * @return {?}
     */
    set disabled(disabled) {
        this._disabled = disabled;
    }
    /**
     * @return {?}
     */
    get id() {
        return this._id;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    set id(id) {
        this._id = id || this._uid;
    }
    /**
     * @return {?}
     */
    get files() {
        return this._files;
    }
    /**
     * @return {?}
     */
    get empty() {
        return typeof this._value === 'undefined';
    }
    /**
     * @return {?}
     */
    get focused() {
        return false;
    }
    /**
     * @return {?}
     */
    openDialog() {
        if (this.fileUpload) {
            this.fileUpload.nativeElement.click();
        }
    }
    /**
     * @return {?}
     */
    clearFiles() {
        this._value = [];
        this._files = [];
        this.recalculate();
    }
    /**
     * @param {?} file
     * @return {?}
     */
    removeFile(file) {
        this._value.splice(this._value.indexOf(file.file), 1);
        this._files.splice(this._files.indexOf(file), 1);
        this.recalculate();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.visibleValue = this.selectedText(this._files);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.stateChanges.complete();
    }
    /**
     * @param {?} files
     * @return {?}
     */
    onChange(files) {
        this._value = [];
        this._files = [];
        for (let i = 0; i < files.length; i++) {
            this._value.push(files[i]);
            this._files.push(new UploadFile(files[i]));
        }
        this.recalculate();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) { }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this._onChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @return {?}
     */
    onContainerClick() { }
    /**
     * @return {?}
     */
    focus() { }
    /**
     * @return {?}
     */
    setDescribedByIds() { }
    /**
     * @return {?}
     */
    recalculate() {
        this.fileUpload.nativeElement.value = '';
        this.visibleValue = this.selectedText(this._files);
        this._onChange(this._value);
        this.onTouched();
        this.updateErrorState();
    }
}
MatFileUploadComponent.decorators = [
    { type: Component, args: [{
                exportAs: 'waMatFileUpload',
                selector: 'wa-mat-file-upload',
                template: "<ng-template #previewContainer>\n\t<mat-list *ngIf=\"preview && files.length\" [attr.dense]=\"dense ? 'dense' : null\">\n\t\t<ng-container *ngFor=\"let file of files; let isLast = last;\">\n\t\t\t<mat-list-item>\n\t\t\t\t<img *ngIf=\"file.supportsImagePreview(); else listItemIcon\" matListAvatar [src]=\"file.getImageSource() | async\">\n\t\t\t\t<ng-template #listItemIcon>\n\t\t\t\t\t<mat-icon mat-list-icon>{{ file.icon }}</mat-icon>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<h3 matLine>{{ file.file.name }}</h3>\n\n\t\t\t\t<mat-progress-bar *ngIf=\"file.progress\" matLine mode=\"determinate\" [value]=\"file.progress\"></mat-progress-bar>\n\n\t\t\t\t<button *ngIf=\"!disabled && file.progress === 0\" mat-icon-button (click)=\"removeFile(file)\" type=\"button\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\t\t\t</mat-list-item>\n\t\t\t<mat-divider *ngIf=\"!isLast\"></mat-divider>\n\t\t</ng-container>\n\t</mat-list>\n</ng-template>\n\n<ng-container *ngIf=\"previewPosition === 'top'\">\n\t<ng-container *ngTemplateOutlet=\"previewContainer\"></ng-container>\n</ng-container>\n\n<input #fileUpload type=\"file\" (change)=\"onChange($event.target.files)\" [multiple]=\"multiple\" style=\"display: none;\">\n\n<div>\n\t<button mat-raised-button (click)=\"openDialog()\" [color]=\"color\" [disabled]=\"disabled\" type=\"button\"><ng-content></ng-content></button>\n\t<span [ngClass]=\"{'mat-caption': dense}\" style=\"padding-left: 10px;\">\n\t\t{{ visibleValue }}\n\t\t<button *ngIf=\"!disabled && files.length\" mat-icon-button (click)=\"clearFiles()\" type=\"button\">\n\t\t\t<mat-icon>close</mat-icon>\n\t\t</button>\n\t</span>\n</div>\n\n<ng-container *ngIf=\"previewPosition === 'bottom'\">\n\t<ng-container *ngTemplateOutlet=\"previewContainer\"></ng-container>\n</ng-container>\n",
                providers: [
                    {
                        provide: MatFormFieldControl,
                        useExisting: MatFileUploadComponent,
                    },
                ]
            }] }
];
/** @nocollapse */
MatFileUploadComponent.ctorParameters = () => [
    { type: ErrorStateMatcher },
    { type: NgForm, decorators: [{ type: Optional }] },
    { type: FormGroupDirective, decorators: [{ type: Optional }] },
    { type: NgControl, decorators: [{ type: Self }, { type: Optional }] }
];
MatFileUploadComponent.propDecorators = {
    placeholder: [{ type: Input }],
    required: [{ type: Input }],
    multiple: [{ type: Input }],
    color: [{ type: Input }],
    preview: [{ type: Input }],
    previewPosition: [{ type: Input }],
    dense: [{ type: Input }],
    selectedText: [{ type: Input }],
    fileUpload: [{ type: ViewChild, args: ['fileUpload',] }],
    value: [{ type: Input }],
    disabled: [{ type: Input }],
    id: [{ type: Input }]
};
/**
 * @param {?} files
 * @return {?}
 */
function defaultSelectedText(files) {
    if (files.length === 0) {
        return '';
    }
    if (files.length === 1) {
        return files[0].file.name;
    }
    return files.length + ' Files selected';
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class MatFileUploadModule {
}
MatFileUploadModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    MatButtonModule, MatDividerModule, MatListModule, MatProgressBarModule, MatIconModule,
                ],
                declarations: [
                    MatFileUploadComponent,
                ],
                exports: [
                    MatFileUploadComponent,
                ],
                providers: [
                    ErrorStateMatcher,
                ],
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @param {?} maxSize
 * @return {?}
 */
function fileMaxSize(maxSize) {
    return fileValidation((file) => file.size > maxSize, (errors) => {
        return {
            fileMaxSize: {
                maxSize: maxSize,
                invalidFiles: errors,
            },
        };
    });
}
/**
 * @param {?} allowedTypes
 * @return {?}
 */
function fileType(allowedTypes) {
    return fileValidation((file) => allowedTypes.indexOf(file.type) < 0, (errors) => {
        return {
            fileType: {
                allowedTypes: allowedTypes,
                invalidFiles: errors,
            },
        };
    });
}
/**
 * @param {?} validator
 * @param {?} createErrors
 * @return {?}
 */
function fileValidation(validator, createErrors) {
    return (control) => {
        if (!control.value) {
            return null;
        }
        /** @type {?} */
        const files = control.value;
        /** @type {?} */
        const errors = [];
        for (let i = 0; i < files.length; i++) {
            if (validator(files[i])) {
                errors.push(files[i]);
            }
        }
        if (errors.length) {
            return createErrors(errors);
        }
        return null;
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { MatFileUploadComponent, MatFileUploadModule, UploadFile, fileMaxSize, fileType, BaseMatFileUploadComponent as ɵa, _BaseMatFileUploadComponentMixin as ɵb };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViYWNhZC1uZy1tYXQtZmlsZS11cGxvYWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL0B3ZWJhY2FkL25nLW1hdC1maWxlLXVwbG9hZC91cGxvYWQtZmlsZS50cyIsIm5nOi8vQHdlYmFjYWQvbmctbWF0LWZpbGUtdXBsb2FkL21hdC1maWxlLXVwbG9hZC5jb21wb25lbnQudHMiLCJuZzovL0B3ZWJhY2FkL25nLW1hdC1maWxlLXVwbG9hZC9tYXQtZmlsZS11cGxvYWQubW9kdWxlLnRzIiwibmc6Ly9Ad2ViYWNhZC9uZy1tYXQtZmlsZS11cGxvYWQvdmFsaWRhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JlYWRGaWxlQXNEYXRhVVJMfSBmcm9tICdAd2ViYWNhZC9vYnNlcnZhYmxlLWZpbGUtcmVhZGVyJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5cblxuY29uc3QgaW1hZ2VNaW1lVHlwZXM6IEFycmF5PHN0cmluZz4gPSBbXG5cdCdpbWFnZS9naWYnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLFxuXTtcblxuXG5leHBvcnQgY2xhc3MgVXBsb2FkRmlsZVxue1xuXG5cblx0cHVibGljIGljb246IHN0cmluZyA9ICdjbG91ZF91cGxvYWQnO1xuXG5cdHByaXZhdGUgaW1hZ2VTb3VyY2U6IE9ic2VydmFibGU8c3RyaW5nPnx1bmRlZmluZWQ7XG5cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgcmVhZG9ubHkgZmlsZTogRmlsZSxcblx0XHRwcml2YXRlIF9wcm9ncmVzczogbnVtYmVyID0gMCxcblx0KSB7fVxuXG5cblx0Z2V0IHByb2dyZXNzKCk6IG51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3Byb2dyZXNzO1xuXHR9XG5cblx0c2V0IHByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9wcm9ncmVzcyA9IHByb2dyZXNzO1xuXHR9XG5cblxuXHRwdWJsaWMgc3VwcG9ydHNJbWFnZVByZXZpZXcoKTogYm9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIGltYWdlTWltZVR5cGVzLmluZGV4T2YodGhpcy5maWxlLnR5cGUpID49IDA7XG5cdH1cblxuXG5cdHB1YmxpYyBnZXRJbWFnZVNvdXJjZSgpOiBPYnNlcnZhYmxlPHN0cmluZz5cblx0e1xuXHRcdGlmICh0eXBlb2YgdGhpcy5pbWFnZVNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybiB0aGlzLmltYWdlU291cmNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmltYWdlU291cmNlID0gcmVhZEZpbGVBc0RhdGFVUkwodGhpcy5maWxlKTtcblx0fVxuXG5cblx0cHVibGljIGluY3JlYXNlUHJvZ3Jlc3MoYWRkOiBudW1iZXIpOiB2b2lkXG5cdHtcblx0XHR0aGlzLnByb2dyZXNzICs9IGFkZDtcblx0fVxuXG59XG4iLCJpbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE9wdGlvbmFsLCBTZWxmLCBPbkluaXQsIE9uRGVzdHJveSwgVmlld0NoaWxkLCBFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7Q29udHJvbFZhbHVlQWNjZXNzb3IsIE5nRm9ybSwgRm9ybUdyb3VwRGlyZWN0aXZlLCBOZ0NvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7RXJyb3JTdGF0ZU1hdGNoZXIsIENhblVwZGF0ZUVycm9yU3RhdGUsIG1peGluRXJyb3JTdGF0ZX0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY29yZSc7XG5pbXBvcnQge01hdEZvcm1GaWVsZENvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2Zvcm0tZmllbGQnO1xuXG5pbXBvcnQge1VwbG9hZEZpbGV9IGZyb20gJy4vdXBsb2FkLWZpbGUnO1xuXG5cbmxldCBuZXh0VW5pcXVlSWQ6IG51bWJlciA9IDA7XG5cblxuZXhwb3J0IGNsYXNzIEJhc2VNYXRGaWxlVXBsb2FkQ29tcG9uZW50XG57XG5cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgX2RlZmF1bHRFcnJvclN0YXRlTWF0Y2hlcjogRXJyb3JTdGF0ZU1hdGNoZXIsXG5cdFx0cHVibGljIF9wYXJlbnRGb3JtOiBOZ0Zvcm0sXG5cdFx0cHVibGljIF9wYXJlbnRGb3JtR3JvdXA6IEZvcm1Hcm91cERpcmVjdGl2ZSxcblx0XHRwdWJsaWMgbmdDb250cm9sOiBOZ0NvbnRyb2wsXG5cdCkge31cblxufVxuXG5cbmV4cG9ydCBjb25zdCBfQmFzZU1hdEZpbGVVcGxvYWRDb21wb25lbnRNaXhpbiA9IG1peGluRXJyb3JTdGF0ZShCYXNlTWF0RmlsZVVwbG9hZENvbXBvbmVudCk7XG5cblxuQENvbXBvbmVudCh7XG5cdGV4cG9ydEFzOiAnd2FNYXRGaWxlVXBsb2FkJyxcblx0c2VsZWN0b3I6ICd3YS1tYXQtZmlsZS11cGxvYWQnLFxuXHR0ZW1wbGF0ZVVybDogJy4vbWF0LWZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sJyxcblx0cHJvdmlkZXJzOiBbXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogTWF0Rm9ybUZpZWxkQ29udHJvbCxcblx0XHRcdHVzZUV4aXN0aW5nOiBNYXRGaWxlVXBsb2FkQ29tcG9uZW50LFxuXHRcdH0sXG5cdF0sXG59KVxuZXhwb3J0IGNsYXNzIE1hdEZpbGVVcGxvYWRDb21wb25lbnQgZXh0ZW5kcyBfQmFzZU1hdEZpbGVVcGxvYWRDb21wb25lbnRNaXhpbiBpbXBsZW1lbnRzXG5cdE9uSW5pdCxcblx0T25EZXN0cm95LFxuXHRDb250cm9sVmFsdWVBY2Nlc3Nvcixcblx0TWF0Rm9ybUZpZWxkQ29udHJvbDxBcnJheTxGaWxlPj5cbntcblxuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBwbGFjZWhvbGRlcjogc3RyaW5nO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBjb2xvcjogc3RyaW5nfHVuZGVmaW5lZDtcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgcHJldmlldzogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBwcmV2aWV3UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbScgPSAnYm90dG9tJztcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgZGVuc2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgc2VsZWN0ZWRUZXh0OiAoZmlsZXM6IEFycmF5PFVwbG9hZEZpbGU+KSA9PiBzdHJpbmcgPSBkZWZhdWx0U2VsZWN0ZWRUZXh0O1xuXG5cdEBWaWV3Q2hpbGQoJ2ZpbGVVcGxvYWQnKVxuXHRwdWJsaWMgZmlsZVVwbG9hZDogRWxlbWVudFJlZjtcblxuXHRwdWJsaWMgdmlzaWJsZVZhbHVlOiBzdHJpbmcgPSAnJztcblxuXHRwdWJsaWMgc2hvdWxkTGFiZWxGbG9hdDogYm9vbGVhbiA9IHRydWU7XG5cblx0cHJpdmF0ZSBfdmFsdWU6IEFycmF5PEZpbGU+O1xuXG5cdHByaXZhdGUgX2ZpbGVzOiBBcnJheTxVcGxvYWRGaWxlPiA9IFtdO1xuXG5cdHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuO1xuXG5cdHByaXZhdGUgX2lkOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBfdWlkOiBzdHJpbmcgPSBgd2EtbWF0LWZpbGUtdXBsb2FkLSR7bmV4dFVuaXF1ZUlkKyt9YDtcblxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGRlZmF1bHRFcnJvclN0YXRlTWF0Y2hlcjogRXJyb3JTdGF0ZU1hdGNoZXIsXG5cdFx0QE9wdGlvbmFsKCkgcGFyZW50Rm9ybTogTmdGb3JtLFxuXHRcdEBPcHRpb25hbCgpIHBhcmVudEZvcm1Hcm91cDogRm9ybUdyb3VwRGlyZWN0aXZlLFxuXHRcdEBTZWxmKCkgQE9wdGlvbmFsKCkgcHVibGljIHJlYWRvbmx5IG5nQ29udHJvbDogTmdDb250cm9sLFxuXHQpIHtcblx0XHRzdXBlcihkZWZhdWx0RXJyb3JTdGF0ZU1hdGNoZXIsIHBhcmVudEZvcm0sIHBhcmVudEZvcm1Hcm91cCwgbmdDb250cm9sKTtcblxuXHRcdGlmICh0aGlzLm5nQ29udHJvbCAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5uZ0NvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG5cdFx0fVxuXHR9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgdmFsdWUoKTogQXJyYXk8RmlsZT5cblx0e1xuXHRcdHJldHVybiB0aGlzLl92YWx1ZTtcblx0fVxuXG5cdHNldCB2YWx1ZSh2YWx1ZTogQXJyYXk8RmlsZT4pIHt9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgZGlzYWJsZWQoKTogYm9vbGVhblxuXHR7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9kaXNhYmxlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybiB0aGlzLl9kaXNhYmxlZDtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5uZ0NvbnRyb2wgJiYgdGhpcy5uZ0NvbnRyb2wuZGlzYWJsZWQgIT09IG51bGwpIHtcblx0XHRcdHJldHVybiB0aGlzLm5nQ29udHJvbC5kaXNhYmxlZDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRzZXQgZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pXG5cdHtcblx0XHR0aGlzLl9kaXNhYmxlZCA9IGRpc2FibGVkO1xuXHR9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgaWQoKTogc3RyaW5nXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faWQ7XG5cdH1cblxuXHRzZXQgaWQoaWQ6IHN0cmluZylcblx0e1xuXHRcdHRoaXMuX2lkID0gaWQgfHwgdGhpcy5fdWlkO1xuXHR9XG5cblxuXHRnZXQgZmlsZXMoKTogQXJyYXk8VXBsb2FkRmlsZT5cblx0e1xuXHRcdHJldHVybiB0aGlzLl9maWxlcztcblx0fVxuXG5cblx0Z2V0IGVtcHR5KCk6IGJvb2xlYW5cblx0e1xuXHRcdHJldHVybiB0eXBlb2YgdGhpcy5fdmFsdWUgPT09ICd1bmRlZmluZWQnO1xuXHR9XG5cblxuXHRnZXQgZm9jdXNlZCgpOiBib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXG5cdHB1YmxpYyBvcGVuRGlhbG9nKCk6IHZvaWRcblx0e1xuXHRcdGlmICh0aGlzLmZpbGVVcGxvYWQpIHtcblx0XHRcdHRoaXMuZmlsZVVwbG9hZC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG5cdFx0fVxuXHR9XG5cblxuXHRwdWJsaWMgY2xlYXJGaWxlcygpOiB2b2lkXG5cdHtcblx0XHR0aGlzLl92YWx1ZSA9IFtdO1xuXHRcdHRoaXMuX2ZpbGVzID0gW107XG5cdFx0dGhpcy5yZWNhbGN1bGF0ZSgpO1xuXHR9XG5cblxuXHRwdWJsaWMgcmVtb3ZlRmlsZShmaWxlOiBVcGxvYWRGaWxlKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5fdmFsdWUuc3BsaWNlKHRoaXMuX3ZhbHVlLmluZGV4T2YoZmlsZS5maWxlKSwgMSk7XG5cdFx0dGhpcy5fZmlsZXMuc3BsaWNlKHRoaXMuX2ZpbGVzLmluZGV4T2YoZmlsZSksIDEpO1xuXHRcdHRoaXMucmVjYWxjdWxhdGUoKTtcblx0fVxuXG5cblx0cHVibGljIG5nT25Jbml0KCk6IHZvaWRcblx0e1xuXHRcdHRoaXMudmlzaWJsZVZhbHVlID0gdGhpcy5zZWxlY3RlZFRleHQodGhpcy5fZmlsZXMpO1xuXHR9XG5cblxuXHRwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcblx0fVxuXG5cblx0cHVibGljIG9uVG91Y2hlZCA9ICgpID0+IHt9O1xuXG5cblx0cHVibGljIG9uQ2hhbmdlKGZpbGVzOiBGaWxlTGlzdCk6IHZvaWRcblx0e1xuXHRcdHRoaXMuX3ZhbHVlID0gW107XG5cdFx0dGhpcy5fZmlsZXMgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMuX3ZhbHVlLnB1c2goZmlsZXNbaV0pO1xuXHRcdFx0dGhpcy5fZmlsZXMucHVzaChuZXcgVXBsb2FkRmlsZShmaWxlc1tpXSkpO1xuXHRcdH1cblxuXHRcdHRoaXMucmVjYWxjdWxhdGUoKTtcblx0fVxuXG5cblx0cHVibGljIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge31cblxuXG5cdHB1YmxpYyByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoXzogYW55KSA9PiB2b2lkKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5fb25DaGFuZ2UgPSBmbjtcblx0fVxuXG5cblx0cHVibGljIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB2b2lkKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5vblRvdWNoZWQgPSBmbjtcblx0fVxuXG5cblx0cHVibGljIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWRcblx0e1xuXHRcdHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuXHR9XG5cblxuXHRwdWJsaWMgb25Db250YWluZXJDbGljaygpOiB2b2lkIHt9XG5cblxuXHRwdWJsaWMgZm9jdXMoKTogdm9pZCB7fVxuXG5cblx0cHVibGljIHNldERlc2NyaWJlZEJ5SWRzKCk6IHZvaWQge31cblxuXG5cdHByaXZhdGUgX29uQ2hhbmdlID0gKF86IGFueSkgPT4ge307XG5cblxuXHRwcml2YXRlIHJlY2FsY3VsYXRlKCk6IHZvaWRcblx0e1xuXHRcdHRoaXMuZmlsZVVwbG9hZC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG5cdFx0dGhpcy52aXNpYmxlVmFsdWUgPSB0aGlzLnNlbGVjdGVkVGV4dCh0aGlzLl9maWxlcyk7XG5cblx0XHR0aGlzLl9vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XG5cdFx0dGhpcy5vblRvdWNoZWQoKTtcblx0XHR0aGlzLnVwZGF0ZUVycm9yU3RhdGUoKTtcblx0fVxuXG59XG5cblxuZnVuY3Rpb24gZGVmYXVsdFNlbGVjdGVkVGV4dChmaWxlczogQXJyYXk8VXBsb2FkRmlsZT4pOiBzdHJpbmdcbntcblx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRyZXR1cm4gZmlsZXNbMF0uZmlsZS5uYW1lO1xuXHR9XG5cblx0cmV0dXJuIGZpbGVzLmxlbmd0aCArICcgRmlsZXMgc2VsZWN0ZWQnO1xufVxuIiwiaW1wb3J0IHtOZ01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbW1vbk1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7RXJyb3JTdGF0ZU1hdGNoZXJ9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2NvcmUnO1xuaW1wb3J0IHtNYXRCdXR0b25Nb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XG5pbXBvcnQge01hdERpdmlkZXJNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpdmlkZXInO1xuaW1wb3J0IHtNYXRMaXN0TW9kdWxlfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9saXN0JztcbmltcG9ydCB7TWF0UHJvZ3Jlc3NCYXJNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Byb2dyZXNzLWJhcic7XG5pbXBvcnQge01hdEljb25Nb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2ljb24nO1xuXG5pbXBvcnQge01hdEZpbGVVcGxvYWRDb21wb25lbnR9IGZyb20gJy4vbWF0LWZpbGUtdXBsb2FkLmNvbXBvbmVudCc7XG5cblxuQE5nTW9kdWxlKHtcblx0aW1wb3J0czogW1xuXHRcdENvbW1vbk1vZHVsZSxcblx0XHRNYXRCdXR0b25Nb2R1bGUsIE1hdERpdmlkZXJNb2R1bGUsIE1hdExpc3RNb2R1bGUsIE1hdFByb2dyZXNzQmFyTW9kdWxlLCBNYXRJY29uTW9kdWxlLFxuXHRdLFxuXHRkZWNsYXJhdGlvbnM6IFtcblx0XHRNYXRGaWxlVXBsb2FkQ29tcG9uZW50LFxuXHRdLFxuXHRleHBvcnRzOiBbXG5cdFx0TWF0RmlsZVVwbG9hZENvbXBvbmVudCxcblx0XSxcblx0cHJvdmlkZXJzOiBbXG5cdFx0RXJyb3JTdGF0ZU1hdGNoZXIsXG5cdF0sXG59KVxuZXhwb3J0IGNsYXNzIE1hdEZpbGVVcGxvYWRNb2R1bGUge31cbiIsImltcG9ydCB7QWJzdHJhY3RDb250cm9sLCBWYWxpZGF0aW9uRXJyb3JzLCBWYWxpZGF0b3JGbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlTWF4U2l6ZShtYXhTaXplOiBudW1iZXIpOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gZmlsZVZhbGlkYXRpb24oKGZpbGUpID0+IGZpbGUuc2l6ZSA+IG1heFNpemUsIChlcnJvcnMpID0+IHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZmlsZU1heFNpemU6IHtcblx0XHRcdFx0bWF4U2l6ZTogbWF4U2l6ZSxcblx0XHRcdFx0aW52YWxpZEZpbGVzOiBlcnJvcnMsXG5cdFx0XHR9LFxuXHRcdH07XG5cdH0pO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlVHlwZShhbGxvd2VkVHlwZXM6IEFycmF5PHN0cmluZz4pOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gZmlsZVZhbGlkYXRpb24oKGZpbGUpID0+IGFsbG93ZWRUeXBlcy5pbmRleE9mKGZpbGUudHlwZSkgPCAwLCAoZXJyb3JzKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGZpbGVUeXBlOiB7XG5cdFx0XHRcdGFsbG93ZWRUeXBlczogYWxsb3dlZFR5cGVzLFxuXHRcdFx0XHRpbnZhbGlkRmlsZXM6IGVycm9ycyxcblx0XHRcdH0sXG5cdFx0fTtcblx0fSk7XG59XG5cblxuZnVuY3Rpb24gZmlsZVZhbGlkYXRpb24odmFsaWRhdG9yOiAoZmlsZTogQmxvYikgPT4gYm9vbGVhbiwgY3JlYXRlRXJyb3JzOiAoZXJyb3JGaWxlczogQXJyYXk8QmxvYj4pID0+IFZhbGlkYXRpb25FcnJvcnMpOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgPT4ge1xuXHRcdGlmICghY29udHJvbC52YWx1ZSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZXM6IEZpbGVMaXN0ID0gY29udHJvbC52YWx1ZTtcblx0XHRjb25zdCBlcnJvcnM6IEFycmF5PGFueT4gPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh2YWxpZGF0b3IoZmlsZXNbaV0pKSB7XG5cdFx0XHRcdGVycm9ycy5wdXNoKGZpbGVzW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZXJyb3JzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUVycm9ycyhlcnJvcnMpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xufVxuXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBSUEsTUFBTSxjQUFjLEdBQWtCO0lBQ3JDLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWTtDQUN0QyxDQUFDO0FBR0Y7Ozs7O0lBU0MsWUFDaUIsTUFDUixZQUFvQixDQUFDO1FBRGIsU0FBSSxHQUFKLElBQUk7UUFDWixjQUFTLEdBQVQsU0FBUztvQkFQSSxjQUFjO0tBUWhDOzs7O0lBR0osSUFBSSxRQUFRO1FBRVgsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0tBQ3RCOzs7OztJQUVELElBQUksUUFBUSxDQUFDLFFBQWdCO1FBRTVCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0tBQzFCOzs7O0lBR00sb0JBQW9CO1FBRTFCLE9BQU8sY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7Ozs7SUFJN0MsY0FBYztRQUVwQixJQUFJLE9BQU8sSUFBSSxDQUFDLFdBQVcs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