import { readFileAsDataURL } from '@webacad/observable-file-reader';
import { __extends } from 'tslib';
import { Component, Input, Optional, Self, ViewChild, NgModule } from '@angular/core';
import { NgForm, FormGroupDirective, NgControl } from '@angular/forms';
import { ErrorStateMatcher, mixinErrorState } from '@angular/material/core';
import { MatFormFieldControl } from '@angular/material/form-field';
import { CommonModule } from '@angular/common';
import { MatButtonModule } from '@angular/material/button';
import { MatDividerModule } from '@angular/material/divider';
import { MatListModule } from '@angular/material/list';
import { MatProgressBarModule } from '@angular/material/progress-bar';
import { MatIconModule } from '@angular/material/icon';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var imageMimeTypes = [
    'image/gif', 'image/png', 'image/jpeg',
];
var UploadFile = /** @class */ (function () {
    function UploadFile(file, _progress) {
        if (_progress === void 0) { _progress = 0; }
        this.file = file;
        this._progress = _progress;
        this.icon = 'cloud_upload';
    }
    Object.defineProperty(UploadFile.prototype, "progress", {
        get: /**
         * @return {?}
         */
        function () {
            return this._progress;
        },
        set: /**
         * @param {?} progress
         * @return {?}
         */
        function (progress) {
            this._progress = progress;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    UploadFile.prototype.supportsImagePreview = /**
     * @return {?}
     */
    function () {
        return imageMimeTypes.indexOf(this.file.type) >= 0;
    };
    /**
     * @return {?}
     */
    UploadFile.prototype.getImageSource = /**
     * @return {?}
     */
    function () {
        if (typeof this.imageSource !== 'undefined') {
            return this.imageSource;
        }
        return this.imageSource = readFileAsDataURL(this.file);
    };
    /**
     * @param {?} add
     * @return {?}
     */
    UploadFile.prototype.increaseProgress = /**
     * @param {?} add
     * @return {?}
     */
    function (add) {
        this.progress += add;
    };
    return UploadFile;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var nextUniqueId = 0;
var BaseMatFileUploadComponent = /** @class */ (function () {
    function BaseMatFileUploadComponent(_defaultErrorStateMatcher, _parentForm, _parentFormGroup, ngControl) {
        this._defaultErrorStateMatcher = _defaultErrorStateMatcher;
        this._parentForm = _parentForm;
        this._parentFormGroup = _parentFormGroup;
        this.ngControl = ngControl;
    }
    return BaseMatFileUploadComponent;
}());
/** @type {?} */
var _BaseMatFileUploadComponentMixin = mixinErrorState(BaseMatFileUploadComponent);
var MatFileUploadComponent = /** @class */ (function (_super) {
    __extends(MatFileUploadComponent, _super);
    function MatFileUploadComponent(defaultErrorStateMatcher, parentForm, parentFormGroup, ngControl) {
        var _this = _super.call(this, defaultErrorStateMatcher, parentForm, parentFormGroup, ngControl) || this;
        _this.ngControl = ngControl;
        _this.required = false;
        _this.multiple = false;
        _this.preview = false;
        _this.previewPosition = 'bottom';
        _this.dense = false;
        _this.selectedText = defaultSelectedText;
        _this.visibleValue = '';
        _this.shouldLabelFloat = true;
        _this._files = [];
        _this._uid = "wa-mat-file-upload-" + nextUniqueId++;
        _this.onTouched = function () { };
        _this._onChange = function (_) { };
        if (_this.ngControl !== null) {
            _this.ngControl.valueAccessor = _this;
        }
        return _this;
    }
    Object.defineProperty(MatFileUploadComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatFileUploadComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            if (typeof this._disabled !== 'undefined') {
                return this._disabled;
            }
            if (this.ngControl && this.ngControl.disabled !== null) {
                return this.ngControl.disabled;
            }
            return false;
        },
        set: /**
         * @param {?} disabled
         * @return {?}
         */
        function (disabled) {
            this._disabled = disabled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatFileUploadComponent.prototype, "id", {
        get: /**
         * @return {?}
         */
        function () {
            return this._id;
        },
        set: /**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            this._id = id || this._uid;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatFileUploadComponent.prototype, "files", {
        get: /**
         * @return {?}
         */
        function () {
            return this._files;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatFileUploadComponent.prototype, "empty", {
        get: /**
         * @return {?}
         */
        function () {
            return typeof this._value === 'undefined';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatFileUploadComponent.prototype, "focused", {
        get: /**
         * @return {?}
         */
        function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.openDialog = /**
     * @return {?}
     */
    function () {
        if (this.fileUpload) {
            this.fileUpload.nativeElement.click();
        }
    };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.clearFiles = /**
     * @return {?}
     */
    function () {
        this._value = [];
        this._files = [];
        this.recalculate();
    };
    /**
     * @param {?} file
     * @return {?}
     */
    MatFileUploadComponent.prototype.removeFile = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        this._value.splice(this._value.indexOf(file.file), 1);
        this._files.splice(this._files.indexOf(file), 1);
        this.recalculate();
    };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.visibleValue = this.selectedText(this._files);
    };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.stateChanges.complete();
    };
    /**
     * @param {?} files
     * @return {?}
     */
    MatFileUploadComponent.prototype.onChange = /**
     * @param {?} files
     * @return {?}
     */
    function (files) {
        this._value = [];
        this._files = [];
        for (var i = 0; i < files.length; i++) {
            this._value.push(files[i]);
            this._files.push(new UploadFile(files[i]));
        }
        this.recalculate();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    MatFileUploadComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) { };
    /**
     * @param {?} fn
     * @return {?}
     */
    MatFileUploadComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    MatFileUploadComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    MatFileUploadComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.onContainerClick = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.focus = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.setDescribedByIds = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    MatFileUploadComponent.prototype.recalculate = /**
     * @return {?}
     */
    function () {
        this.fileUpload.nativeElement.value = '';
        this.visibleValue = this.selectedText(this._files);
        this._onChange(this._value);
        this.onTouched();
        this.updateErrorState();
    };
    MatFileUploadComponent.decorators = [
        { type: Component, args: [{
                    exportAs: 'waMatFileUpload',
                    selector: 'wa-mat-file-upload',
                    template: "<ng-template #previewContainer>\n\t<mat-list *ngIf=\"preview && files.length\" [attr.dense]=\"dense ? 'dense' : null\">\n\t\t<ng-container *ngFor=\"let file of files; let isLast = last;\">\n\t\t\t<mat-list-item>\n\t\t\t\t<img *ngIf=\"file.supportsImagePreview(); else listItemIcon\" matListAvatar [src]=\"file.getImageSource() | async\">\n\t\t\t\t<ng-template #listItemIcon>\n\t\t\t\t\t<mat-icon mat-list-icon>{{ file.icon }}</mat-icon>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<h3 matLine>{{ file.file.name }}</h3>\n\n\t\t\t\t<mat-progress-bar *ngIf=\"file.progress\" matLine mode=\"determinate\" [value]=\"file.progress\"></mat-progress-bar>\n\n\t\t\t\t<button *ngIf=\"!disabled && file.progress === 0\" mat-icon-button (click)=\"removeFile(file)\" type=\"button\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\t\t\t</mat-list-item>\n\t\t\t<mat-divider *ngIf=\"!isLast\"></mat-divider>\n\t\t</ng-container>\n\t</mat-list>\n</ng-template>\n\n<ng-container *ngIf=\"previewPosition === 'top'\">\n\t<ng-container *ngTemplateOutlet=\"previewContainer\"></ng-container>\n</ng-container>\n\n<input #fileUpload type=\"file\" (change)=\"onChange($event.target.files)\" [multiple]=\"multiple\" style=\"display: none;\">\n\n<div>\n\t<button mat-raised-button (click)=\"openDialog()\" [color]=\"color\" [disabled]=\"disabled\" type=\"button\"><ng-content></ng-content></button>\n\t<span [ngClass]=\"{'mat-caption': dense}\" style=\"padding-left: 10px;\">\n\t\t{{ visibleValue }}\n\t\t<button *ngIf=\"!disabled && files.length\" mat-icon-button (click)=\"clearFiles()\" type=\"button\">\n\t\t\t<mat-icon>close</mat-icon>\n\t\t</button>\n\t</span>\n</div>\n\n<ng-container *ngIf=\"previewPosition === 'bottom'\">\n\t<ng-container *ngTemplateOutlet=\"previewContainer\"></ng-container>\n</ng-container>\n",
                    providers: [
                        {
                            provide: MatFormFieldControl,
                            useExisting: MatFileUploadComponent,
                        },
                    ]
                }] }
    ];
    /** @nocollapse */
    MatFileUploadComponent.ctorParameters = function () { return [
        { type: ErrorStateMatcher },
        { type: NgForm, decorators: [{ type: Optional }] },
        { type: FormGroupDirective, decorators: [{ type: Optional }] },
        { type: NgControl, decorators: [{ type: Self }, { type: Optional }] }
    ]; };
    MatFileUploadComponent.propDecorators = {
        placeholder: [{ type: Input }],
        required: [{ type: Input }],
        multiple: [{ type: Input }],
        color: [{ type: Input }],
        preview: [{ type: Input }],
        previewPosition: [{ type: Input }],
        dense: [{ type: Input }],
        selectedText: [{ type: Input }],
        fileUpload: [{ type: ViewChild, args: ['fileUpload',] }],
        value: [{ type: Input }],
        disabled: [{ type: Input }],
        id: [{ type: Input }]
    };
    return MatFileUploadComponent;
}(_BaseMatFileUploadComponentMixin));
/**
 * @param {?} files
 * @return {?}
 */
function defaultSelectedText(files) {
    if (files.length === 0) {
        return '';
    }
    if (files.length === 1) {
        return files[0].file.name;
    }
    return files.length + ' Files selected';
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var MatFileUploadModule = /** @class */ (function () {
    function MatFileUploadModule() {
    }
    MatFileUploadModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        MatButtonModule, MatDividerModule, MatListModule, MatProgressBarModule, MatIconModule,
                    ],
                    declarations: [
                        MatFileUploadComponent,
                    ],
                    exports: [
                        MatFileUploadComponent,
                    ],
                    providers: [
                        ErrorStateMatcher,
                    ],
                },] }
    ];
    return MatFileUploadModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @param {?} maxSize
 * @return {?}
 */
function fileMaxSize(maxSize) {
    return fileValidation(function (file) { return file.size > maxSize; }, function (errors) {
        return {
            fileMaxSize: {
                maxSize: maxSize,
                invalidFiles: errors,
            },
        };
    });
}
/**
 * @param {?} allowedTypes
 * @return {?}
 */
function fileType(allowedTypes) {
    return fileValidation(function (file) { return allowedTypes.indexOf(file.type) < 0; }, function (errors) {
        return {
            fileType: {
                allowedTypes: allowedTypes,
                invalidFiles: errors,
            },
        };
    });
}
/**
 * @param {?} validator
 * @param {?} createErrors
 * @return {?}
 */
function fileValidation(validator, createErrors) {
    return function (control) {
        if (!control.value) {
            return null;
        }
        /** @type {?} */
        var files = control.value;
        /** @type {?} */
        var errors = [];
        for (var i = 0; i < files.length; i++) {
            if (validator(files[i])) {
                errors.push(files[i]);
            }
        }
        if (errors.length) {
            return createErrors(errors);
        }
        return null;
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { MatFileUploadComponent, MatFileUploadModule, UploadFile, fileMaxSize, fileType, BaseMatFileUploadComponent as ɵa, _BaseMatFileUploadComponentMixin as ɵb };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViYWNhZC1uZy1tYXQtZmlsZS11cGxvYWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL0B3ZWJhY2FkL25nLW1hdC1maWxlLXVwbG9hZC91cGxvYWQtZmlsZS50cyIsIm5nOi8vQHdlYmFjYWQvbmctbWF0LWZpbGUtdXBsb2FkL21hdC1maWxlLXVwbG9hZC5jb21wb25lbnQudHMiLCJuZzovL0B3ZWJhY2FkL25nLW1hdC1maWxlLXVwbG9hZC9tYXQtZmlsZS11cGxvYWQubW9kdWxlLnRzIiwibmc6Ly9Ad2ViYWNhZC9uZy1tYXQtZmlsZS11cGxvYWQvdmFsaWRhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JlYWRGaWxlQXNEYXRhVVJMfSBmcm9tICdAd2ViYWNhZC9vYnNlcnZhYmxlLWZpbGUtcmVhZGVyJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5cblxuY29uc3QgaW1hZ2VNaW1lVHlwZXM6IEFycmF5PHN0cmluZz4gPSBbXG5cdCdpbWFnZS9naWYnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLFxuXTtcblxuXG5leHBvcnQgY2xhc3MgVXBsb2FkRmlsZVxue1xuXG5cblx0cHVibGljIGljb246IHN0cmluZyA9ICdjbG91ZF91cGxvYWQnO1xuXG5cdHByaXZhdGUgaW1hZ2VTb3VyY2U6IE9ic2VydmFibGU8c3RyaW5nPnx1bmRlZmluZWQ7XG5cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgcmVhZG9ubHkgZmlsZTogRmlsZSxcblx0XHRwcml2YXRlIF9wcm9ncmVzczogbnVtYmVyID0gMCxcblx0KSB7fVxuXG5cblx0Z2V0IHByb2dyZXNzKCk6IG51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3Byb2dyZXNzO1xuXHR9XG5cblx0c2V0IHByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9wcm9ncmVzcyA9IHByb2dyZXNzO1xuXHR9XG5cblxuXHRwdWJsaWMgc3VwcG9ydHNJbWFnZVByZXZpZXcoKTogYm9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIGltYWdlTWltZVR5cGVzLmluZGV4T2YodGhpcy5maWxlLnR5cGUpID49IDA7XG5cdH1cblxuXG5cdHB1YmxpYyBnZXRJbWFnZVNvdXJjZSgpOiBPYnNlcnZhYmxlPHN0cmluZz5cblx0e1xuXHRcdGlmICh0eXBlb2YgdGhpcy5pbWFnZVNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybiB0aGlzLmltYWdlU291cmNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmltYWdlU291cmNlID0gcmVhZEZpbGVBc0RhdGFVUkwodGhpcy5maWxlKTtcblx0fVxuXG5cblx0cHVibGljIGluY3JlYXNlUHJvZ3Jlc3MoYWRkOiBudW1iZXIpOiB2b2lkXG5cdHtcblx0XHR0aGlzLnByb2dyZXNzICs9IGFkZDtcblx0fVxuXG59XG4iLCJpbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE9wdGlvbmFsLCBTZWxmLCBPbkluaXQsIE9uRGVzdHJveSwgVmlld0NoaWxkLCBFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7Q29udHJvbFZhbHVlQWNjZXNzb3IsIE5nRm9ybSwgRm9ybUdyb3VwRGlyZWN0aXZlLCBOZ0NvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7RXJyb3JTdGF0ZU1hdGNoZXIsIENhblVwZGF0ZUVycm9yU3RhdGUsIG1peGluRXJyb3JTdGF0ZX0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY29yZSc7XG5pbXBvcnQge01hdEZvcm1GaWVsZENvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2Zvcm0tZmllbGQnO1xuXG5pbXBvcnQge1VwbG9hZEZpbGV9IGZyb20gJy4vdXBsb2FkLWZpbGUnO1xuXG5cbmxldCBuZXh0VW5pcXVlSWQ6IG51bWJlciA9IDA7XG5cblxuZXhwb3J0IGNsYXNzIEJhc2VNYXRGaWxlVXBsb2FkQ29tcG9uZW50XG57XG5cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgX2RlZmF1bHRFcnJvclN0YXRlTWF0Y2hlcjogRXJyb3JTdGF0ZU1hdGNoZXIsXG5cdFx0cHVibGljIF9wYXJlbnRGb3JtOiBOZ0Zvcm0sXG5cdFx0cHVibGljIF9wYXJlbnRGb3JtR3JvdXA6IEZvcm1Hcm91cERpcmVjdGl2ZSxcblx0XHRwdWJsaWMgbmdDb250cm9sOiBOZ0NvbnRyb2wsXG5cdCkge31cblxufVxuXG5cbmV4cG9ydCBjb25zdCBfQmFzZU1hdEZpbGVVcGxvYWRDb21wb25lbnRNaXhpbiA9IG1peGluRXJyb3JTdGF0ZShCYXNlTWF0RmlsZVVwbG9hZENvbXBvbmVudCk7XG5cblxuQENvbXBvbmVudCh7XG5cdGV4cG9ydEFzOiAnd2FNYXRGaWxlVXBsb2FkJyxcblx0c2VsZWN0b3I6ICd3YS1tYXQtZmlsZS11cGxvYWQnLFxuXHR0ZW1wbGF0ZVVybDogJy4vbWF0LWZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sJyxcblx0cHJvdmlkZXJzOiBbXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogTWF0Rm9ybUZpZWxkQ29udHJvbCxcblx0XHRcdHVzZUV4aXN0aW5nOiBNYXRGaWxlVXBsb2FkQ29tcG9uZW50LFxuXHRcdH0sXG5cdF0sXG59KVxuZXhwb3J0IGNsYXNzIE1hdEZpbGVVcGxvYWRDb21wb25lbnQgZXh0ZW5kcyBfQmFzZU1hdEZpbGVVcGxvYWRDb21wb25lbnRNaXhpbiBpbXBsZW1lbnRzXG5cdE9uSW5pdCxcblx0T25EZXN0cm95LFxuXHRDb250cm9sVmFsdWVBY2Nlc3Nvcixcblx0TWF0Rm9ybUZpZWxkQ29udHJvbDxBcnJheTxGaWxlPj5cbntcblxuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBwbGFjZWhvbGRlcjogc3RyaW5nO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBjb2xvcjogc3RyaW5nfHVuZGVmaW5lZDtcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgcHJldmlldzogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdEBJbnB1dCgpXG5cdHB1YmxpYyBwcmV2aWV3UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbScgPSAnYm90dG9tJztcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgZGVuc2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRASW5wdXQoKVxuXHRwdWJsaWMgc2VsZWN0ZWRUZXh0OiAoZmlsZXM6IEFycmF5PFVwbG9hZEZpbGU+KSA9PiBzdHJpbmcgPSBkZWZhdWx0U2VsZWN0ZWRUZXh0O1xuXG5cdEBWaWV3Q2hpbGQoJ2ZpbGVVcGxvYWQnKVxuXHRwdWJsaWMgZmlsZVVwbG9hZDogRWxlbWVudFJlZjtcblxuXHRwdWJsaWMgdmlzaWJsZVZhbHVlOiBzdHJpbmcgPSAnJztcblxuXHRwdWJsaWMgc2hvdWxkTGFiZWxGbG9hdDogYm9vbGVhbiA9IHRydWU7XG5cblx0cHJpdmF0ZSBfdmFsdWU6IEFycmF5PEZpbGU+O1xuXG5cdHByaXZhdGUgX2ZpbGVzOiBBcnJheTxVcGxvYWRGaWxlPiA9IFtdO1xuXG5cdHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuO1xuXG5cdHByaXZhdGUgX2lkOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBfdWlkOiBzdHJpbmcgPSBgd2EtbWF0LWZpbGUtdXBsb2FkLSR7bmV4dFVuaXF1ZUlkKyt9YDtcblxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGRlZmF1bHRFcnJvclN0YXRlTWF0Y2hlcjogRXJyb3JTdGF0ZU1hdGNoZXIsXG5cdFx0QE9wdGlvbmFsKCkgcGFyZW50Rm9ybTogTmdGb3JtLFxuXHRcdEBPcHRpb25hbCgpIHBhcmVudEZvcm1Hcm91cDogRm9ybUdyb3VwRGlyZWN0aXZlLFxuXHRcdEBTZWxmKCkgQE9wdGlvbmFsKCkgcHVibGljIHJlYWRvbmx5IG5nQ29udHJvbDogTmdDb250cm9sLFxuXHQpIHtcblx0XHRzdXBlcihkZWZhdWx0RXJyb3JTdGF0ZU1hdGNoZXIsIHBhcmVudEZvcm0sIHBhcmVudEZvcm1Hcm91cCwgbmdDb250cm9sKTtcblxuXHRcdGlmICh0aGlzLm5nQ29udHJvbCAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5uZ0NvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG5cdFx0fVxuXHR9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgdmFsdWUoKTogQXJyYXk8RmlsZT5cblx0e1xuXHRcdHJldHVybiB0aGlzLl92YWx1ZTtcblx0fVxuXG5cdHNldCB2YWx1ZSh2YWx1ZTogQXJyYXk8RmlsZT4pIHt9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgZGlzYWJsZWQoKTogYm9vbGVhblxuXHR7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9kaXNhYmxlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybiB0aGlzLl9kaXNhYmxlZDtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5uZ0NvbnRyb2wgJiYgdGhpcy5uZ0NvbnRyb2wuZGlzYWJsZWQgIT09IG51bGwpIHtcblx0XHRcdHJldHVybiB0aGlzLm5nQ29udHJvbC5kaXNhYmxlZDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRzZXQgZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pXG5cdHtcblx0XHR0aGlzLl9kaXNhYmxlZCA9IGRpc2FibGVkO1xuXHR9XG5cblxuXHRASW5wdXQoKVxuXHRnZXQgaWQoKTogc3RyaW5nXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5faWQ7XG5cdH1cblxuXHRzZXQgaWQoaWQ6IHN0cmluZylcblx0e1xuXHRcdHRoaXMuX2lkID0gaWQgfHwgdGhpcy5fdWlkO1xuXHR9XG5cblxuXHRnZXQgZmlsZXMoKTogQXJyYXk8VXBsb2FkRmlsZT5cblx0e1xuXHRcdHJldHVybiB0aGlzLl9maWxlcztcblx0fVxuXG5cblx0Z2V0IGVtcHR5KCk6IGJvb2xlYW5cblx0e1xuXHRcdHJldHVybiB0eXBlb2YgdGhpcy5fdmFsdWUgPT09ICd1bmRlZmluZWQnO1xuXHR9XG5cblxuXHRnZXQgZm9jdXNlZCgpOiBib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXG5cdHB1YmxpYyBvcGVuRGlhbG9nKCk6IHZvaWRcblx0e1xuXHRcdGlmICh0aGlzLmZpbGVVcGxvYWQpIHtcblx0XHRcdHRoaXMuZmlsZVVwbG9hZC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG5cdFx0fVxuXHR9XG5cblxuXHRwdWJsaWMgY2xlYXJGaWxlcygpOiB2b2lkXG5cdHtcblx0XHR0aGlzLl92YWx1ZSA9IFtdO1xuXHRcdHRoaXMuX2ZpbGVzID0gW107XG5cdFx0dGhpcy5yZWNhbGN1bGF0ZSgpO1xuXHR9XG5cblxuXHRwdWJsaWMgcmVtb3ZlRmlsZShmaWxlOiBVcGxvYWRGaWxlKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5fdmFsdWUuc3BsaWNlKHRoaXMuX3ZhbHVlLmluZGV4T2YoZmlsZS5maWxlKSwgMSk7XG5cdFx0dGhpcy5fZmlsZXMuc3BsaWNlKHRoaXMuX2ZpbGVzLmluZGV4T2YoZmlsZSksIDEpO1xuXHRcdHRoaXMucmVjYWxjdWxhdGUoKTtcblx0fVxuXG5cblx0cHVibGljIG5nT25Jbml0KCk6IHZvaWRcblx0e1xuXHRcdHRoaXMudmlzaWJsZVZhbHVlID0gdGhpcy5zZWxlY3RlZFRleHQodGhpcy5fZmlsZXMpO1xuXHR9XG5cblxuXHRwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcblx0fVxuXG5cblx0cHVibGljIG9uVG91Y2hlZCA9ICgpID0+IHt9O1xuXG5cblx0cHVibGljIG9uQ2hhbmdlKGZpbGVzOiBGaWxlTGlzdCk6IHZvaWRcblx0e1xuXHRcdHRoaXMuX3ZhbHVlID0gW107XG5cdFx0dGhpcy5fZmlsZXMgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMuX3ZhbHVlLnB1c2goZmlsZXNbaV0pO1xuXHRcdFx0dGhpcy5fZmlsZXMucHVzaChuZXcgVXBsb2FkRmlsZShmaWxlc1tpXSkpO1xuXHRcdH1cblxuXHRcdHRoaXMucmVjYWxjdWxhdGUoKTtcblx0fVxuXG5cblx0cHVibGljIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge31cblxuXG5cdHB1YmxpYyByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoXzogYW55KSA9PiB2b2lkKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5fb25DaGFuZ2UgPSBmbjtcblx0fVxuXG5cblx0cHVibGljIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB2b2lkKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5vblRvdWNoZWQgPSBmbjtcblx0fVxuXG5cblx0cHVibGljIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWRcblx0e1xuXHRcdHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuXHR9XG5cblxuXHRwdWJsaWMgb25Db250YWluZXJDbGljaygpOiB2b2lkIHt9XG5cblxuXHRwdWJsaWMgZm9jdXMoKTogdm9pZCB7fVxuXG5cblx0cHVibGljIHNldERlc2NyaWJlZEJ5SWRzKCk6IHZvaWQge31cblxuXG5cdHByaXZhdGUgX29uQ2hhbmdlID0gKF86IGFueSkgPT4ge307XG5cblxuXHRwcml2YXRlIHJlY2FsY3VsYXRlKCk6IHZvaWRcblx0e1xuXHRcdHRoaXMuZmlsZVVwbG9hZC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG5cdFx0dGhpcy52aXNpYmxlVmFsdWUgPSB0aGlzLnNlbGVjdGVkVGV4dCh0aGlzLl9maWxlcyk7XG5cblx0XHR0aGlzLl9vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XG5cdFx0dGhpcy5vblRvdWNoZWQoKTtcblx0XHR0aGlzLnVwZGF0ZUVycm9yU3RhdGUoKTtcblx0fVxuXG59XG5cblxuZnVuY3Rpb24gZGVmYXVsdFNlbGVjdGVkVGV4dChmaWxlczogQXJyYXk8VXBsb2FkRmlsZT4pOiBzdHJpbmdcbntcblx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcblx0XHRyZXR1cm4gZmlsZXNbMF0uZmlsZS5uYW1lO1xuXHR9XG5cblx0cmV0dXJuIGZpbGVzLmxlbmd0aCArICcgRmlsZXMgc2VsZWN0ZWQnO1xufVxuIiwiaW1wb3J0IHtOZ01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbW1vbk1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7RXJyb3JTdGF0ZU1hdGNoZXJ9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2NvcmUnO1xuaW1wb3J0IHtNYXRCdXR0b25Nb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XG5pbXBvcnQge01hdERpdmlkZXJNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpdmlkZXInO1xuaW1wb3J0IHtNYXRMaXN0TW9kdWxlfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9saXN0JztcbmltcG9ydCB7TWF0UHJvZ3Jlc3NCYXJNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Byb2dyZXNzLWJhcic7XG5pbXBvcnQge01hdEljb25Nb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2ljb24nO1xuXG5pbXBvcnQge01hdEZpbGVVcGxvYWRDb21wb25lbnR9IGZyb20gJy4vbWF0LWZpbGUtdXBsb2FkLmNvbXBvbmVudCc7XG5cblxuQE5nTW9kdWxlKHtcblx0aW1wb3J0czogW1xuXHRcdENvbW1vbk1vZHVsZSxcblx0XHRNYXRCdXR0b25Nb2R1bGUsIE1hdERpdmlkZXJNb2R1bGUsIE1hdExpc3RNb2R1bGUsIE1hdFByb2dyZXNzQmFyTW9kdWxlLCBNYXRJY29uTW9kdWxlLFxuXHRdLFxuXHRkZWNsYXJhdGlvbnM6IFtcblx0XHRNYXRGaWxlVXBsb2FkQ29tcG9uZW50LFxuXHRdLFxuXHRleHBvcnRzOiBbXG5cdFx0TWF0RmlsZVVwbG9hZENvbXBvbmVudCxcblx0XSxcblx0cHJvdmlkZXJzOiBbXG5cdFx0RXJyb3JTdGF0ZU1hdGNoZXIsXG5cdF0sXG59KVxuZXhwb3J0IGNsYXNzIE1hdEZpbGVVcGxvYWRNb2R1bGUge31cbiIsImltcG9ydCB7QWJzdHJhY3RDb250cm9sLCBWYWxpZGF0aW9uRXJyb3JzLCBWYWxpZGF0b3JGbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlTWF4U2l6ZShtYXhTaXplOiBudW1iZXIpOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gZmlsZVZhbGlkYXRpb24oKGZpbGUpID0+IGZpbGUuc2l6ZSA+IG1heFNpemUsIChlcnJvcnMpID0+IHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZmlsZU1heFNpemU6IHtcblx0XHRcdFx0bWF4U2l6ZTogbWF4U2l6ZSxcblx0XHRcdFx0aW52YWxpZEZpbGVzOiBlcnJvcnMsXG5cdFx0XHR9LFxuXHRcdH07XG5cdH0pO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlVHlwZShhbGxvd2VkVHlwZXM6IEFycmF5PHN0cmluZz4pOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gZmlsZVZhbGlkYXRpb24oKGZpbGUpID0+IGFsbG93ZWRUeXBlcy5pbmRleE9mKGZpbGUudHlwZSkgPCAwLCAoZXJyb3JzKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGZpbGVUeXBlOiB7XG5cdFx0XHRcdGFsbG93ZWRUeXBlczogYWxsb3dlZFR5cGVzLFxuXHRcdFx0XHRpbnZhbGlkRmlsZXM6IGVycm9ycyxcblx0XHRcdH0sXG5cdFx0fTtcblx0fSk7XG59XG5cblxuZnVuY3Rpb24gZmlsZVZhbGlkYXRpb24odmFsaWRhdG9yOiAoZmlsZTogQmxvYikgPT4gYm9vbGVhbiwgY3JlYXRlRXJyb3JzOiAoZXJyb3JGaWxlczogQXJyYXk8QmxvYj4pID0+IFZhbGlkYXRpb25FcnJvcnMpOiBWYWxpZGF0b3JGblxue1xuXHRyZXR1cm4gKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgPT4ge1xuXHRcdGlmICghY29udHJvbC52YWx1ZSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZXM6IEZpbGVMaXN0ID0gY29udHJvbC52YWx1ZTtcblx0XHRjb25zdCBlcnJvcnM6IEFycmF5PGFueT4gPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh2YWxpZGF0b3IoZmlsZXNbaV0pKSB7XG5cdFx0XHRcdGVycm9ycy5wdXNoKGZpbGVzW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZXJyb3JzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUVycm9ycyhlcnJvcnMpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xufVxuXG4iXSwibmFtZXMiOlsidHNsaWJfMS5fX2V4dGVuZHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFJQSxJQUFNLGNBQWMsR0FBa0I7SUFDckMsV0FBVyxFQUFFLFdBQVcsRUFBRSxZQUFZO0NBQ3RDLENBQUM7QUFHRixJQUFBO0lBU0Msb0JBQ2lCLE1BQ1I7O1FBRFEsU0FBSSxHQUFKLElBQUk7UUFDWixjQUFTLEdBQVQsU0FBUztvQkFQSSxjQUFjO0tBUWhDO0lBR0osc0JBQUksZ0NBQVE7Ozs7UUFBWjtZQUVDLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztTQUN0Qjs7Ozs7UUFFRCxVQUFhLFFBQWdCO1lBRTVCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1NBQzFCOzs7T0FMQTs7OztJQVFNLHlDQUFvQjs7OztRQUUxQixPQUFPLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7O0lBSTdDLG1DQUFjOzs7O1FBRXBCLElB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